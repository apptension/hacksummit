<div layout="column" class="adminTabContent__layout">
  <div flex layout="column" layout-fill class="adminTabContent__header">
    <h1 class="md-title adminTabContent__tabTitle">Manage Projects</h1>
    <div class="adminTabContent__tabDesc">
      Use this space to set up new projects and manage the existing ones. You can change projectsâ€™ settings and edit the lineups here.
    </div>
    <div flex layout="row" class="adminTabContent__filterControls" layout-align="start center">
      <div class="form__inputGroup">
        <label class="form__inputLabel">Project Name: </label>
        <md-input-container md-no-float class="form__inputControl adminTabContent__filterControl">
          <input class="form__input" placeholder="Search" ng-model="projectsCtrl.filtrers.searchText"/>
        </md-input-container>
      </div>
    </div>
  </div>

  <div layout flex="none" layout-align="center center" ng-show="pending">
    <md-progress-circular md-mode="indeterminate"></md-progress-circular>
  </div>

  <div flex layout="column" class="adminTabContent__tabList">
    <div flex="none" class="adminTabItem__mainContainer" ng-repeat="project in projectsCtrl.getProjects()">
      <div layout class="adminTabItem__labelContainer" ng-click="projectsCtrl.toggleItem(project)">
        <md-list-item>
          <div class="projectItem__icon" layout layout-align="center center">
            <md-icon flex>work</md-icon>
          </div>
          <div class="md-list-item-text">
            <span class="adminTabItem__name">{{ project.name }}</span>
          </div>
          <div class="adminTabItem__date">
            {{ project.startDate.format('DD MMM YYYY') }}
          </div>
        </md-list-item>
      </div>
      <div class="adminTabItem__editContainer projectItem__editContainer" ng-show="project.edit">
        <div layout="column" class="adminTabItem__editForm">
          <div class="form__inputGroup" layout="row">
            <label flex="none" class="form__inputLabel projectItem__nameLabel">Project Name: </label>
            <md-input-container flex md-no-float class="form__inputControl projectItem__projectNameControl">
              <input class="form__input" ng-model="project.formModel.name" aria-label="formModelName" />
            </md-input-container>
          </div>

          <div layout="row" class="projectItem__datepickersContainer" layout-align="start center">
            <div flex="none">
              <label flex="none" class="form__inputLabel form__inputLabel--datepicker">Project Duration: </label>
            </div>
            <div flex="grow">
              <div layout="row">
                <div class="form__inputGroup form__inputGroup--datepicker projectItem__datepicker" layout="row">
                  <md-datepicker flex="grow" class="form__input form__datepicker" ng-model="project.formModel.startDate" md-placeholder="Start date"></md-datepicker>
                </div>

                <md-icon class="projectItem__datepickersSpacer">remove</md-icon>

                <div class="form__inputGroup form__inputGroup--datepicker projectItem__datepicker" layout="row">
                  <md-datepicker flex="grow" class="form__input form__datepicker" ng-model="project.formModel.endDate" md-placeholder="Start date"></md-datepicker>
                </div>
              </div>
            </div>
          </div>
          <div class="form__inputGroup" layout="row">
            <label flex="none" class="form__inputLabel projectItem__teamLabel">Team: </label>
            <md-contact-chips
                    flex="grow"
                    ng-model="project.members"
                    ng-required="true"
                    md-contacts="projectsCtrl.searchUser($query, project.members)"
                    md-contact-name="name"
                    md-contact-image="avatar"
                    md-require-match="true">
            </md-contact-chips>
          </div>
          <div layout="row" layout-align="space-between center" class="adminTabItem__bottomControls">
            <md-button class="md-icon-button adminTabItem__removeIcon" flex="none">
              <md-icon>delete</md-icon>
            </md-button>
            <div flex="none" class="adminTabItem__submitButtons">
              <md-button class="md-primary" ng-click="project.edit=false">cancel</md-button>
              <md-button class="md-primary md-raised" ng-click="projectsCtrl.submitProject(project)">save</md-button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <md-button class="md-fab md-primary adminTabContent__addButton">
    <md-icon>add</md-icon>
  </md-button>
</div>
